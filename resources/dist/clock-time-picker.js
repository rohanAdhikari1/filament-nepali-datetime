var p=["\u0966","\u0967","\u0968","\u0969","\u096A","\u096B","\u096C","\u096D","\u096E","\u096F"];var f=c=>{let h=c.toString(),o="";for(let u of h)u>="0"&&u<="9"?o+=p[parseInt(u)]??u:o+=u;return o};var S=(c,h)=>{let o=String(c);return h==="np"?f(o):o};function x({defaultFocusedTime:c,hasSeconds:h,displayFormat:o,defaultView:u,isAutofocused:g,locale:T,shouldCloseOnTimeSelection:d,state:A}){return{displayText:"",view:null,isDragging:!1,hour:null,minute:null,second:null,meridian:null,state:A,shortHours:[],hours:[],minutes:[],seconds:[],handangle:0,init(){this.view=u??"hour";let t=this.parseTimeToArray(c)||[1,0,0],[e,i,r]=t;this.meridian=e>=12?"PM":"AM",this.hour=e%12||12,this.minute=i,this.second=r,this.setDisplayText(),g&&this.$nextTick(()=>this.togglePanelVisibility(this.$refs.button))},toNumber(t){return S(String(t).padStart(2,"0"),T)},parseTimeToArray(t){return t?t.split(":").map(Number):null},timeArrayToSeconds([t,e,i]){return t*3600+e*60+i},formatTimeWithFormatString(t,e){if(!t||!e)return"";let[i,r,s]=t,n=i>=12?"PM":"AM";i=i%12||12;let a={HH:String(t[0]).padStart(2,"0"),H:String(t[0]),hh:String(i).padStart(2,"0"),h:String(i),mm:String(r).padStart(2,"0"),m:String(r),ss:String(s).padStart(2,"0"),s:String(s),A:n,a:n.toLowerCase()},l=e;return Object.keys(a).forEach(m=>{l=l.replace(new RegExp(m,"g"),a[m])}),l},clearState(){this.setState(null),this.hour=1,this.minute=0,this.second=0,this.meridian="AM"},onDragClockHand(t){if(!this.isDragging)return;let e=this.$refs.clock.getBoundingClientRect(),i=e.left+e.width/2,r=e.top+e.height/2,s=t.clientX-i,n=t.clientY-r,a=Math.atan2(n,s)*(180/Math.PI)+90;a<0&&(a+=360);let l=360/this.getCurrentUnitMax(),m=Math.round(a/l);this.setCurrentUnitValue(m)},focusNext(){this.setCurrentUnitValue(this.getCurrentUnitValue()+1)},focusPrev(){this.setCurrentUnitValue(this.getCurrentUnitValue()-1)},focusNextView(t=!1){let e={hour:"minute",minute:h?"second":null};e[this.view]?this.setView(e[this.view]):t&&(this.selectTime(),this.resetView())},focusPrevView(){let t={second:"minute",minute:"hour"};t[this.view]&&this.setView(t[this.view])},focusFirstView(){this.resetView()},focusLastView(){let t=h?"second":"minute";this.setView(t)},isTimeDisabled(t){if(!t||this.$refs?.disabledTimes&&JSON.parse(this.$refs.disabledTimes.value??[]).some(s=>{let n=this.timeArrayToSeconds(s);return e===n}))return!0;if(this.disabledTimes?.length)for(let s of this.disabledTimes){let n=this.timeArrayToSeconds(s);if(e===n)return!0}let e=this.timeArrayToSeconds(t),i=this.getMinTime();if(i){let s=this.timeArrayToSeconds(i);if(e<s)return!0}let r=this.getMaxTime();if(r){let s=this.timeArrayToSeconds(r);if(e>s)return!0}return!1},hourDisabled(t){return this.isTimeDisabled([t,this.minute,this.second])},minuteDisabled(t){return this.isTimeDisabled([this.hour,t,this.second])},secondDisabled(t){return this.isTimeDisabled([this.hour,this.minute,t])},getMaxTime(){let t=this.$refs.maxTime?.value;return this.parseTimeToArray(t)},getMinTime(){let t=this.$refs.minTime?.value;return this.parseTimeToArray(t)},getSelectedTimeArray(){let t=this.hour;return this.meridian?.toUpperCase()==="PM"&&t!==12&&(t+=12),this.meridian?.toUpperCase()==="AM"&&t===12&&(t=0),[t,this.minute,this.second]},getSelectedTime(){return this.state===void 0||this.state===null?null:time},getSelectedTimeFormatted(t="HH:mm:ss"){return this.formatTimeWithFormatString(this.getSelectedTimeArray(),t)},getCurrentUnitMax(){return this.view==="hour"?12:60},getCurrentUnitValue(){let t=this.view;return t==="hour"?this.hour:t==="minute"?this.minute:this.second},getMarkStyle(t,e=12,i=40){let s=t/e*360*Math.PI/180,n=50+i*Math.sin(s),a=50-i*Math.cos(s);return`left: ${n}%; top: ${a}%; transform: translate(-50%, -50%);`},togglePanelVisibility(){this.isOpen()||this.setupTimeLayout(),this.$refs.panel.toggle(this.$refs.button)},setCurrentUnitValue(t){let e=this.view;if(e==="hour"){this.setHour(t);return}if(e==="minute"){this.setMinute(t);return}if(e==="second"){this.setSecond(t);return}},setDisplayText(){if(this.state===null){this.displayText="";return}let t=this.parseTimeToArray(this.state)||[1,0,0];this.displayText=S(this.formatTimeWithFormatString(t,o),T)},getLength(t,e){return Array.from({length:t},(i,r)=>r+e)},updateHandAngle(){let t=this.getCurrentUnitMax(),i=this.getCurrentUnitValue()/t*360-this.handangle%360;i<-180?this.handangle+=360+i:i>180?this.handangle-=360-i:this.handangle+=i},setupTimeLayout(){this.shortHours=this.getLength(12,1),this.hours=this.getLength(12,13),this.minutes=this.getLength(60,0),this.seconds=this.getLength(60,0),this.updateHandAngle()},selectTime(){this.isTimeDisabled(this.getSelectedTimeArray())||(this.setState(this.getSelectedTimeFormatted()),d&&this.togglePanelVisibility())},setHour(t){if(this.hour===t)return;let e=(t%12+12)%12||12;this.hour=e,this.updateHandAngle()},selectHour(t){this.setHour(t),this.reFocusInput(),d&&this.focusNextView(!0)},setMinute(t){if(this.minute===t)return;let e=(t%60+60)%60;this.minute=e,this.updateHandAngle()},selectMinute(t){this.setMinute(t),this.reFocusInput(),d&&this.focusNextView(!0)},setSecond(t){if(this.second===t)return;let e=(t%60+60)%60;this.second=e,this.updateHandAngle()},selectSecond(t){this.setSecond(t),this.reFocusInput(),d&&this.focusNextView(!0)},setMeridian(t){this.meridian=t,this.reFocusInput()},setView(t){this.view!==t&&(this.view=t,this.updateHandAngle(),this.reFocusInput())},resetView(){this.setView(u??"hour")},setState(t){if(t===null){this.state=null,this.setDisplayText();return}this.state=t,this.setDisplayText()},reFocusInput(){this.$nextTick(()=>this.$refs.displaytext?.focus())},isOpen(){return this.$refs.panel?.style.display==="block"}}}export{x as default};
