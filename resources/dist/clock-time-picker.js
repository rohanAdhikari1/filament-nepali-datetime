var A=["\u0966","\u0967","\u0968","\u0969","\u096A","\u096B","\u096C","\u096D","\u096E","\u096F"];var g=d=>{let l=d.toString(),u="";for(let h of l)h>="0"&&h<="9"?u+=A[parseInt(h)]??h:u+=h;return u};var S=(d,l)=>{let u=String(d);return l==="np"?g(u):u};function M({defaultFocusedTime:d,hasSeconds:l,displayFormat:u,defaultView:h,isAutofocused:x,locale:T,shouldCloseOnTimeSelection:m,state:_}){return{displayText:"",view:null,isDragging:!1,hour:null,minute:null,second:null,meridian:null,state:_,handangle:0,init(){this.view=h??"hour";let t=this.parseTimeToArray(d)||[12,0,0],[e,i,s]=t;this.meridian=e>=12?"PM":"AM",this.hour=e%12||12,this.minute=i,this.second=s,this.setDisplayText(),x&&this.$nextTick(()=>this.togglePanelVisibility(this.$refs.button))},toNumber(t){return S(String(t).padStart(2,"0"),T)},parseTimeToArray(t){return t?t.split(":").map(Number):null},timeArrayToSeconds([t,e,i]){return t*3600+e*60+i},formatTimeWithFormatString(t,e){if(!t||!e)return"";let[i,s,r]=t,n=i>=12?"PM":"AM";i=i%12||12;let o={HH:String(t[0]).padStart(2,"0"),H:String(t[0]),hh:String(i).padStart(2,"0"),h:String(i),mm:String(s).padStart(2,"0"),m:String(s),ss:String(r).padStart(2,"0"),s:String(r),A:n,a:n.toLowerCase()},a=e;return Object.keys(o).forEach(c=>{a=a.replace(new RegExp(c,"g"),o[c])}),a},clearState(){this.setState(null),this.hour=1,this.minute=0,this.second=0,this.meridian="AM"},onDragClockHand(t){if(!this.isDragging)return;let e=this.$refs.clock.getBoundingClientRect(),i=e.left+e.width/2,s=e.top+e.height/2,r=t.clientX-i,n=t.clientY-s,o=Math.atan2(n,r)*(180/Math.PI)+90;o<0&&(o+=360);let a=360/this.getCurrentUnitMax(),c=Math.round(o/a)%this.getCurrentUnitMax(),p=this.view,f=[...this.getSelectedTimeArray()];p==="hour"&&(f[0]=c),p==="minute"&&(f[1]=c),p==="second"&&(f[2]=c),this.isTimeDisabled(f)||this.setCurrentUnitValue(c)},findNextEnabled(t,e=1){let i=this.getCurrentUnitMax(),s=this.getCurrentUnitValue();for(let r=0;r<i;r++){s=(s+e+i)%i;let n=[...this.getSelectedTimeArray()];if(t==="hour"){let o=this.meridian?.toUpperCase(),a=s;o==="AM"&&s===12&&(a=0),o==="PM"&&s!==12&&(a=s+12),n[0]=a}else t==="minute"?n[1]=s:t==="second"&&(n[2]=s);if(!this.isTimeDisabled(n))return s}return this.getCurrentUnitValue()},focusNext(){let t=this.view,e=this.findNextEnabled(t,1);this.setCurrentUnitValue(e)},focusPrev(){let t=this.view,e=this.findNextEnabled(t,-1);this.setCurrentUnitValue(e)},focusNextView(t=!1){let e={hour:"minute",minute:l?"second":null};e[this.view]?this.setView(e[this.view]):t&&(this.selectTime(),this.resetView())},focusPrevView(){let t={second:"minute",minute:"hour"};t[this.view]&&this.setView(t[this.view])},focusFirstView(){this.resetView()},focusLastView(){let t=l?"second":"minute";this.setView(t)},isTimeDisabled(t){if(!t)return!0;let e=this.timeArrayToSeconds(t);if(this.$refs?.disabledTimes&&JSON.parse(this.$refs.disabledTimes.value??[]).some(r=>{let n=this.timeArrayToSeconds(r);return e===n}))return!0;let i=this.getMinTime();if(i){let r=this.timeArrayToSeconds(i);if(e<r)return!0}let s=this.getMaxTime();if(s){let r=this.timeArrayToSeconds(s);if(e>r)return!0}return!1},hourDisabled(t){return this.meridian?.toUpperCase()==="PM"&&t!==12&&(t+=12),this.meridian?.toUpperCase()==="AM"&&t===12&&(t=0),this.isTimeDisabled([t,this.minute,this.second])},minuteDisabled(t){let e=this.hour;return this.meridian?.toUpperCase()==="PM"&&e!==12&&(e+=12),this.meridian?.toUpperCase()==="AM"&&e===12&&(e=0),this.isTimeDisabled([e,t,this.second])},secondDisabled(t){let e=this.hour;return this.meridian?.toUpperCase()==="PM"&&e!==12&&(e+=12),this.meridian?.toUpperCase()==="AM"&&e===12&&(e=0),this.isTimeDisabled([e,this.minute,t])},getMaxTime(){let t=this.$refs.maxTime?.value;return this.parseTimeToArray(t)},getMinTime(){let t=this.$refs.minTime?.value;return this.parseTimeToArray(t)},getSelectedTimeArray(){let t=this.hour;return this.meridian?.toUpperCase()==="PM"&&t!==12&&(t+=12),this.meridian?.toUpperCase()==="AM"&&t===12&&(t=0),[t,this.minute,this.second]},getSelectedTime(){return this.state===void 0||this.state===null?null:time},getSelectedTimeFormatted(t="HH:mm:ss"){return this.formatTimeWithFormatString(this.getSelectedTimeArray(),t)},getCurrentUnitMax(){return this.view==="hour"?12:60},getCurrentUnitValue(){let t=this.view;return t==="hour"?this.hour:t==="minute"?this.minute:this.second},getMarkStyle(t,e=12,i=40){let r=t/e*360*Math.PI/180,n=50+i*Math.sin(r),o=50-i*Math.cos(r);return`left: ${n}%; top: ${o}%; transform: translate(-50%, -50%);`},togglePanelVisibility(){this.isOpen()||this.updateHandAngle(),this.$refs.panel.toggle(this.$refs.button)},setCurrentUnitValue(t){let e=this.view;if(e==="hour"){this.setHour(t);return}if(e==="minute"){this.setMinute(t);return}if(e==="second"){this.setSecond(t);return}},setDisplayText(){if(this.state===null){this.displayText="";return}let t=this.parseTimeToArray(this.state)||[1,0,0];this.displayText=S(this.formatTimeWithFormatString(t,u),T)},getLength(t,e){return Array.from({length:t},(i,s)=>s+e)},updateHandAngle(){let t=this.getCurrentUnitMax(),i=this.getCurrentUnitValue()/t*360-this.handangle%360;i<-180?this.handangle+=360+i:i>180?this.handangle-=360-i:this.handangle+=i},selectTime(){this.isTimeDisabled(this.getSelectedTimeArray())||(this.setState(this.getSelectedTimeFormatted()),m&&this.togglePanelVisibility())},setHour(t){if(this.hour===t)return;let e=(t%12+12)%12||12;this.hour=e,this.updateHandAngle()},selectHour(t){this.setHour(t),this.reFocusInput(),m&&this.focusNextView(!0)},setMinute(t){if(this.minute===t)return;let e=(t%60+60)%60;this.minute=e,this.updateHandAngle()},selectMinute(t){this.setMinute(t),this.reFocusInput(),m&&this.focusNextView(!0)},setSecond(t){if(this.second===t)return;let e=(t%60+60)%60;this.second=e,this.updateHandAngle()},selectSecond(t){this.setSecond(t),this.reFocusInput(),m&&this.focusNextView(!0)},setMeridian(t){this.meridian=t,this.reFocusInput()},setView(t){this.view!==t&&(this.view=t,this.updateHandAngle(),this.reFocusInput())},resetView(){this.setView(h??"hour")},setState(t){if(t===null){this.state=null,this.setDisplayText();return}this.state=t,this.setDisplayText()},reFocusInput(){this.$nextTick(()=>this.$refs.displaytext?.focus())},isOpen(){return this.$refs.panel?.style.display==="block"}}}export{M as default};
